# 問題

# 解き方

# 実装方針

# 実装例

# 参考リンク
グラフの到達可能性の判定クエリがたくさん来るとき（２パターン）
https://evalcat.hatenablog.com/entry/2019/02/22/004436

```
上の問題を少し改変した以下の問題を考えます。

有向グラフGと、あるノードxが与えられます。そのうえでクエリがたくさん来ます。クエリの内容は「yを与えます。ノードyからノードxへ到達可能か判定してください」というものです。このクエリに各クエリ当たり定数時間で回答してください
問題文の変更点は、各クエリのyに対して、前の問題ではx->yの到達可能性を判定していたのに対し、今の問題ではその逆y->xへの到達可能性を判定する問題になっています。クエリ当たり定数時間で回答したいのでいちいちyからDFSするとダメです。この問題にこたえるには、Gの有向辺を逆にする操作reverseを行い、reverse(G)について、x->yへの到達可能性を前計算しておけばよいです。「Gにおいてx->yへ到達可能」<=>「reverse(G)においてy->xへ到達可能」が成立しているからです。
```
→Gとreverse(G)を調べると良さそう。この２の結果を合体させると、パスがあるかどうかの判定ができそう。

DFS (深さ優先探索) 超入門！ 〜 グラフ・アルゴリズムの世界への入口 〜【後編】
https://qiita.com/drken/items/a803d4fc4a727e02f7ba
```
5-1. 動的計画法
グラフ探索の考え方と、動的計画法とは密接な関係にあります。そもそも動的計画法とは、グラフ上の各辺を緩和する考え方が主軸となっています (動的計画法入門記事を参照)。そして DAG においては DFS 再帰関数の帰りがけ時に、キャッシュにメモするという行為を行うだけで動的計画法になります。
```

グラフの2頂点が同じ連結成分に属するか判定するアルゴリズム
https://algo-logic.info/is-same-connected-components/
```
効率的なアルゴリズム（DFS or BFS を使用）：

前処理
「未探索」の頂点について以下を行う
DFS or BFS で、同じ連結成分に含まれる全ての頂点に連結成分に固有な番号を記録しておく
クエリ（u,v が同じ連結成分か判定）
前処理で記録した番号が、2頂点で等しいか比較する。等しければ同じ連結成分に属する。
```
→reverse(G)をDFSしながら、徐々にタグをつけていくイメージにすると、調べるのが効率化できそう。

[{1, 3}, {0, 3}, {1, 2, 3}, {0, 3}]
