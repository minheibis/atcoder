# 問題

# 解き方
https://twitter.com/e869120/status/1385363292739104775/photo/1

大枠
1. 行き来できるグループを求める。
2. それぞれのグループの中での答えは、グループ内の点の個数をnとすると、n(n-1)/2。それを求めて合計すればよい。


「行き来できるグループを求める」の方法
強連結成分分解を行う。
1. dfsを行い、帰りがけの順を記録する。a, b を任意の異なる２点として、
    a → b の到達可能性の判定
2. reverse(G)について、帰りがけの順が大きい順からdfsを行う。
    b → a の到達可能性の判定(i.e., reverse(G)における a → d の到達可能性の判定)

t(v)>t(u) であることと(i)よりもとのグラフで v から u へのパスがある。
← t(v)>t(u)　なので、言い換えると、v から出て、 u を通って来た？

# 実装方針

# 実装例
https://www.youtube.com/watch?v=cRbst-d4Fho
内の
https://atcoder.jp/contests/typical90/submissions/27898154

に説明を少し加えた
https://atcoder.jp/contests/typical90/submissions/39152051

# 参考リンク
021 - Come Back in One Piece（★5）の解説
https://enakai00.hatenablog.com/entry/2021/08/05/134906

強連結成分分解の意味とアルゴリズム
https://manabitimes.jp/math/1250

グラフの到達可能性の判定クエリがたくさん来るとき（２パターン）
https://evalcat.hatenablog.com/entry/2019/02/22/004436

```
上の問題を少し改変した以下の問題を考えます。

有向グラフGと、あるノードxが与えられます。そのうえでクエリがたくさん来ます。クエリの内容は「yを与えます。ノードyからノードxへ到達可能か判定してください」というものです。このクエリに各クエリ当たり定数時間で回答してください
問題文の変更点は、各クエリのyに対して、前の問題ではx->yの到達可能性を判定していたのに対し、今の問題ではその逆y->xへの到達可能性を判定する問題になっています。クエリ当たり定数時間で回答したいのでいちいちyからDFSするとダメです。この問題にこたえるには、Gの有向辺を逆にする操作reverseを行い、reverse(G)について、x->yへの到達可能性を前計算しておけばよいです。「Gにおいてx->yへ到達可能」<=>「reverse(G)においてy->xへ到達可能」が成立しているからです。
```
補足: 
・「Gにおいてy->xへ到達可能」<=>「reverse(G)においてx->yへ到達可能」とした方が最後の部分はわかりやすそう。

DFS (深さ優先探索) 超入門！ 〜 グラフ・アルゴリズムの世界への入口 〜【前編】
帰りがけ順の説明
https://qiita.com/drken/items/4a7869c5e304883f539b#3-4-dfs-%E3%81%AE%E6%8E%A2%E7%B4%A2%E9%A0%86%E5%BA%8F%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E3%81%AE%E8%A9%B3%E7%B4%B0


よくわからんかった記事
【SCC編】AtCoder Library 解読 〜Pythonでの実装まで〜
https://qiita.com/AkariLuminous/items/a2c789cebdd098dcb503
